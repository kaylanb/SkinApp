{% extends "base.html" %}
{% block content %}
<!-- extend base layout -->

<!--         HOG Results -->
        {% if hog_fig and hog_predict and hog_stats %} 
            <h1>HOG image analysis:</h1>
            <img src={{url_for('get_tmp_image_url',filename=hog_fig)}} width="600" height="200">
            <h3>HOG predicts:</h3> 
            ET: {{hog_predict[0]}} <br>
            SVC: {{hog_predict[1]}}

            <h3>HOG stats:</h3>
            <p>ET: precision= {{hog_stats["ET"]["prec"]}}, recall= {{hog_stats["ET"]["recall"]}} 
                fp_norm= {{hog_stats["ET"]["fp_norm"]}}, fn_norm= {{hog_stats["ET"]["fn_norm"]}}
            </p>
            <p>SVC: precision= {{hog_stats["SVC"]["prec"]}}, recall= {{hog_stats["SVC"]["recall"]}} 
                fp_norm= {{hog_stats["SVC"]["fp_norm"]}}, fn_norm= {{hog_stats["SVC"]["fn_norm"]}}
            </p>
        {% endif %}
        
<!--         Blob Results -->
        {% if blob_fig and blob_predict and blob_stats %} 
            <h1>Blob Features extracted:</h1> Number of Blobs and the Percent of total image area they occupy
            <img src={{url_for('get_tmp_image_url',filename=blob_fig)}} width="400" height="1200">
            <h3>Description of Blob Features above</h3>
                <ol>
                    <li><strong>SkinPixels: </strong>"human skin" color pixels are white. Image made by converted RGB pixel values into a color space that is supposed to distinguish between "human skin" and "other" colors. Doing this for 5 different such color spaces, and treating "human skin" as pixels identified as "human skin" by at least 4 out of 5 color spacees. 
                    </li>
                    <li><strong>Blobs: </strong> contiguous regions found by "scipy.ndimage.measurements.label()" color coded by largest (yellow/red) and smallest (blue/dark blue)
                    </li>
                    <li><strong>Blobs_GrMinArea: </strong> Remove blobs with total number of pixels < 100 (hard coded value)
                    </li>
                    <li><strong>Blobs_GrUserFloor: </strong> Remove all blobs EXCEPT those with number of pixels > 0.5% of the total number of pixels in the image
                    </li>
                    <li><strong>Blobs_wSkinFilledGrFloor: </strong> Keep blobs that contain the most "holes", specifically blobs with at least 15% of the pixels they contains are holes. A "hole" is a non-human-skin pixel that is completely enclosed on all sides by human-skin pixels.
                    </li>
                    <li><strong>Blobs_wSmallHorizVertLines: </strong> Convert all "holes" in each blob to human-pixels, then remove blobs that have > 30% of their pixels flagged as being part of either horizontal or vertical lines. Done using "skimage.filter.vsobel()" and "skimage.filter.hsobel()".
                    </li>   
                    <li><strong>Blobs_wConvexHullAreaGrFloor: </strong> Convert all "holes" in each blob to human-pixels, then draw a Convex Hull around each blob. Keep blobs that occupy > 50% of their convex hulls. Use "skimage.filter.sobel" to draw convex hull.
                    </li>
                </ol>
            <h3>Blob predicts:</h3> 
            <p> blob_results.HasPeople= {{blob_predict}} </p>

            <h3>Blob stats:</h3>
            <p> Fraction Correct: {{blob_stats.frac_correct}} <br>
                Precision: {{blob_stats.precision}} <br>
                Recall: {{blob_stats.recall}} <br>
                True Pos. (normalized): {{blob_stats.tp_norm}} <br>
                False Pos. (normalized): {{blob_stats.fp_norm}}
            </p>
        {% endif %}

<!-- extend base layout -->
{% endblock %}
